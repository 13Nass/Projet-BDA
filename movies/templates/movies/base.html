<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}CinéExplorer{% endblock %}</title>

  <style>
    :root{
      --bg0:#070812;
      --bg1:#0b1030;
      --bg2:#1a0b2e;
      --txt:#eef0ff;
      --muted:#b9b8d6;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.16);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --glow1:#7c4dff;
      --glow2:#00e5ff;
      --glow3:#ff4dd8;
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color: var(--txt);
      background: radial-gradient(1200px 900px at 15% 10%, rgba(124,77,255,.25), transparent 55%),
                  radial-gradient(900px 700px at 85% 20%, rgba(0,229,255,.18), transparent 50%),
                  radial-gradient(1000px 800px at 60% 90%, rgba(255,77,216,.18), transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1) 45%, var(--bg2));
      overflow-x:hidden;
    }

    /* ====== Magical layers ====== */
    .magic-bg{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-1;
      overflow:hidden;
    }

    /* starfield */
    .magic-bg::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.9) 0 1px, transparent 2px),
        radial-gradient(circle at 70% 40%, rgba(255,255,255,.8) 0 1px, transparent 2px),
        radial-gradient(circle at 35% 70%, rgba(255,255,255,.7) 0 1px, transparent 2px),
        radial-gradient(circle at 85% 75%, rgba(255,255,255,.6) 0 1px, transparent 2px);
      background-size: 220px 220px, 260px 260px, 300px 300px, 340px 340px;
      opacity:.28;
      filter: blur(.2px);
      animation: drift 22s linear infinite;
    }

    /* spiral aurora (conic gradient) */
    .magic-bg::after{
      content:"";
      position:absolute;
      left:50%;
      top:50%;
      width:1200px;
      height:1200px;
      transform: translate(-50%,-50%);
      background:
        conic-gradient(from 0deg,
          rgba(124,77,255,.00),
          rgba(124,77,255,.22),
          rgba(0,229,255,.20),
          rgba(255,77,216,.18),
          rgba(124,77,255,.00)
        );
      filter: blur(18px);
      opacity:.65;
      mix-blend-mode: screen;
      animation: spin 18s linear infinite;
      mask-image: radial-gradient(circle, rgba(0,0,0,1) 0 46%, rgba(0,0,0,.15) 62%, transparent 72%);
    }

    @keyframes drift{
      0%{ transform: translate3d(-2%, -2%, 0) scale(1.05); }
      50%{ transform: translate3d(2%, 1%, 0) scale(1.08); }
      100%{ transform: translate3d(-2%, -2%, 0) scale(1.05); }
    }
    @keyframes spin{
      from{ transform: translate(-50%,-50%) rotate(0deg); }
      to{ transform: translate(-50%,-50%) rotate(360deg); }
    }

    /* light beams */
    .beams{
      position:absolute;
      inset:-30% -30%;
      background:
        linear-gradient(35deg, rgba(0,229,255,.00) 0%, rgba(0,229,255,.10) 18%, rgba(124,77,255,.00) 38%),
        linear-gradient(120deg, rgba(255,77,216,.00) 0%, rgba(255,77,216,.10) 16%, rgba(124,77,255,.00) 42%),
        linear-gradient(70deg, rgba(124,77,255,.00) 0%, rgba(124,77,255,.14) 20%, rgba(0,229,255,.00) 48%);
      filter: blur(22px);
      opacity:.55;
      animation: beams 14s ease-in-out infinite;
    }
    @keyframes beams{
      0%,100%{ transform: translate3d(-2%, -2%, 0) rotate(-2deg) }
      50%{ transform: translate3d(2%, 1%, 0) rotate(2deg) }
    }

    /* ====== Layout ====== */
    .container{
      width:min(1100px, 92vw);
      margin: 28px auto 80px;
    }

    .topbar{
      position: sticky;
      top: 14px;
      z-index: 50;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding: 14px 14px;
      border-radius: calc(var(--radius) + 6px);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      color: var(--txt);
      font-weight: 800;
      letter-spacing: .2px;
      user-select:none;
      white-space:nowrap;
    }

    .sigil{
      width:34px;height:34px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.0) 45%),
        conic-gradient(from 0deg, rgba(124,77,255,.9), rgba(0,229,255,.9), rgba(255,77,216,.9), rgba(124,77,255,.9));
      box-shadow:
        0 0 24px rgba(124,77,255,.35),
        0 0 28px rgba(0,229,255,.25),
        inset 0 0 10px rgba(255,255,255,.12);
      position:relative;
      overflow:hidden;
    }
    .sigil::after{
      content:"";
      position:absolute; inset:-40%;
      background: radial-gradient(circle, rgba(255,255,255,.22), transparent 60%);
      animation: spin 8s linear infinite;
    }

    .nav{
      display:flex; gap:10px; align-items:center;
      flex-wrap:wrap;
    }
    .nav a{
      text-decoration:none;
      color: var(--muted);
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid transparent;
      transition: .18s ease;
      font-weight: 650;
    }
    .nav a:hover{
      color: var(--txt);
      border-color: rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      box-shadow: 0 0 0 4px rgba(124,77,255,.10);
    }

    .search{
      display:flex;
      gap:10px;
      align-items:center;
      flex: 1;
      justify-content:flex-end;
      min-width: 260px;
    }

    .search input{
      width:min(420px, 44vw);
      padding: 10px 12px;
      border-radius: 14px;
      outline:none;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(10,12,26,.55);
      color: var(--txt);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .search input::placeholder{ color: rgba(185,184,214,.65); }
    .btn{
      padding: 10px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background:
        linear-gradient(135deg, rgba(124,77,255,.55), rgba(0,229,255,.30));
      color: var(--txt);
      font-weight: 750;
      cursor:pointer;
      transition: .18s ease;
      box-shadow: 0 10px 30px rgba(124,77,255,.18);
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 16px 44px rgba(124,77,255,.25);
    }

    .hero{
      margin-top: 22px;
      padding: 22px 20px;
      border-radius: calc(var(--radius) + 8px);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle at 30% 20%, rgba(0,229,255,.22), transparent 50%),
                  radial-gradient(circle at 70% 70%, rgba(255,77,216,.20), transparent 52%),
                  conic-gradient(from 90deg, rgba(124,77,255,.0), rgba(124,77,255,.18), rgba(0,229,255,.14), rgba(255,77,216,.14), rgba(124,77,255,.0));
      filter: blur(22px);
      opacity:.55;
      animation: drift 18s ease-in-out infinite;
    }
    .hero > *{ position:relative; }

    h1,h2,h3{ margin:0 0 10px; }
    h1{
      font-size: clamp(28px, 4vw, 44px);
      letter-spacing: .3px;
      text-shadow:
        0 0 16px rgba(124,77,255,.22),
        0 0 20px rgba(0,229,255,.14);
    }
    .sub{
      color: var(--muted);
      max-width: 72ch;
      line-height: 1.45;
      margin: 0;
    }

    .grid{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
    }
    .card{
      grid-column: span 6;
      padding: 14px 14px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      position:relative;
      overflow:hidden;
    }
    .card::after{
      content:"";
      position:absolute; inset:-50%;
      background: radial-gradient(circle at 30% 30%, rgba(124,77,255,.20), transparent 40%),
                  radial-gradient(circle at 70% 60%, rgba(0,229,255,.16), transparent 42%),
                  radial-gradient(circle at 50% 80%, rgba(255,77,216,.14), transparent 45%);
      filter: blur(18px);
      opacity:.45;
      pointer-events:none;
    }
    .card > *{ position:relative; }

    .kpi{
      font-size: 26px;
      font-weight: 900;
      margin-top: 6px;
      letter-spacing: .3px;
    }
    .label{
      color: var(--muted);
      font-weight: 650;
      font-size: 13px;
      letter-spacing: .2px;
    }

    footer{
      margin-top: 20px;
      color: rgba(185,184,214,.72);
      font-size: 13px;
      text-align:center;
    }

    @media (max-width: 860px){
      .search{ justify-content:flex-start; width:100%; }
      .topbar{ flex-wrap:wrap; }
      .card{ grid-column: span 12; }
    }

    @media (prefers-reduced-motion: reduce){
      .magic-bg::before, .magic-bg::after, .beams, .sigil::after, .hero::before { animation:none !important; }
      .btn:hover{ transform:none; }
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body>
  <div class="magic-bg">
    <div class="beams"></div>
  </div>

  <div class="container">
    <header class="topbar">
      <a class="brand" href="/">
        <span class="sigil" aria-hidden="true"></span>
        CinéExplorer
      </a>

      <nav class="nav">
        <a href="/">Accueil</a>
        <a href="/movies/">Films</a>
        <a href="/stats/">Stats</a>
      </nav>

      <form class="search" action="/search/" method="get">
        <input name="q" placeholder="Film ou personne..." value="{{ request.GET.q|default:'' }}">
        <button class="btn" type="submit">Rechercher</button>
      </form>
    </header>

    {% block content %}{% endblock %}

    <footer>
      ✦ CinéExplorer — thème “Arcane UI” ✦
    </footer>
  </div>

  {% block extra_js %}{% endblock %}
</body>
</html>
