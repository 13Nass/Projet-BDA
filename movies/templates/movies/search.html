{% extends "movies/base.html" %}
{% block content %}
<style>
  .search-wrap{max-width:1100px;margin:0 auto;padding:28px 18px}
  .search-title{font-size:28px;font-weight:800;margin:8px 0 18px}
  .muted{opacity:.8}
  .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}
  .card{border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.25);border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .card a{color:inherit;text-decoration:none;display:block;padding:14px}
  .card:hover{transform:translateY(-2px);transition:.15s ease;box-shadow:0 16px 42px rgba(0,0,0,.35)}
  .h{font-weight:800;font-size:16px;line-height:1.2}
  .meta{margin-top:8px;display:flex;flex-wrap:wrap;gap:8px}
  .pill{font-size:12px;padding:4px 10px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.10)}
  .section{margin-top:24px}
</style>

<div class="search-wrap">
  <div class="search-title">R√©sultats{% if q %} pour ‚Äú{{ q }}‚Äù{% endif %}</div>
  {% if not q %}
    <div class="muted">Tape un film ou une personne dans la barre de recherche.</div>  {% else %}
    <div class="muted">‚úì {{ movies|length }} film(s) et {{ persons|length }} personne(s) trouv√©(e)s</div>  {% endif %}

  <div class="section">
    <h2>üé¨ Films <span class="muted">({{ movies|length }})</span></h2>
    {% if movies %}
      <div class="grid">
        {% for m in movies %}
          <div class="card">
            <a href="{% url 'movie_detail' m.movie_id %}">
              <div class="h">{{ m.primary_title|default:"Sans titre" }}</div>
              <div class="meta">
                {% if m.start_year %}<span class="pill">üìÖ {{ m.start_year }}</span>{% endif %}
                {% if m.rating %}<span class="pill">‚≠ê {{ m.rating }}</span>{% endif %}
                {% if m.votes %}<span class="pill">üë• {{ m.votes }}</span>{% endif %}
              </div>
              {% if m.genres %}<div class="muted" style="margin-top:10px">{{ m.genres }}</div>{% endif %}
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      {% if q %}<div class="muted">Aucun film trouv√©.</div>{% endif %}
    {% endif %}
  </div>

  <div class="section">
    <h2>üßë Personnes <span class="muted">({{ persons|length }})</span></h2>
    {% if persons %}
      <div class="grid">
        {% for p in persons %}
          <div class="card">
            <a href="#">
              <div class="h">{{ p.name }}</div>
              <div class="meta">
                {% if p.birth_year %}<span class="pill">üéÇ {{ p.birth_year }}</span>{% endif %}
                {% if p.death_year %}<span class="pill">‚úù {{ p.death_year }}</span>{% endif %}
                <span class="pill">ID: {{ p.person_id }}</span>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      {% if q %}<div class="muted">Aucune personne trouv√©e.</div>{% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}
